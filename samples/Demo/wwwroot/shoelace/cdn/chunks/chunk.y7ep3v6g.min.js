/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@shoelace-style/shoelace@2.17.1/cdn/chunks/chunk.Y7EP3V6G.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{e}from"./chunk.2L6GHXIJ.js";import{getIconLibrary,unwatchIcon,watchIcon}from"./chunk.ZL53POKZ.js";import{icon_styles_default}from"./chunk.33QRBYPI.js";import{watch}from"./chunk.SJGTYGCD.js";import{component_styles_default}from"./chunk.K23QWHWK.js";import{ShoelaceElement,n,r}from"./chunk.UQRBALDC.js";import{x}from"./chunk.CXZZ2LVK.js";import{__decorateClass}from"./chunk.625AWUY7.js";var parser,CACHEABLE_ERROR=Symbol(),RETRYABLE_ERROR=Symbol(),iconCache=new Map,SlIcon=class extends ShoelaceElement{constructor(){super(...arguments),this.initialRender=!1,this.svg=null,this.label="",this.library="default"}async resolveIcon(t,e){var r;let s;if(null==e?void 0:e.spriteSheet)return this.svg=x`<svg part="svg">
        <use part="use" href="${t}"></use>
      </svg>`,this.svg;try{if(s=await fetch(t,{mode:"cors"}),!s.ok)return 410===s.status?CACHEABLE_ERROR:RETRYABLE_ERROR}catch(t){return RETRYABLE_ERROR}try{const t=document.createElement("div");t.innerHTML=await s.text();const e=t.firstElementChild;if("svg"!==(null==(r=null==e?void 0:e.tagName)?void 0:r.toLowerCase()))return CACHEABLE_ERROR;parser||(parser=new DOMParser);const o=parser.parseFromString(e.outerHTML,"text/html").body.querySelector("svg");return o?(o.part.add("svg"),document.adoptNode(o)):CACHEABLE_ERROR}catch(t){return CACHEABLE_ERROR}}connectedCallback(){super.connectedCallback(),watchIcon(this)}firstUpdated(){this.initialRender=!0,this.setIcon()}disconnectedCallback(){super.disconnectedCallback(),unwatchIcon(this)}getIconSource(){const t=getIconLibrary(this.library);return this.name&&t?{url:t.resolver(this.name),fromLibrary:!0}:{url:this.src,fromLibrary:!1}}handleLabelChange(){"string"==typeof this.label&&this.label.length>0?(this.setAttribute("role","img"),this.setAttribute("aria-label",this.label),this.removeAttribute("aria-hidden")):(this.removeAttribute("role"),this.removeAttribute("aria-label"),this.setAttribute("aria-hidden","true"))}async setIcon(){var t;const{url:r,fromLibrary:s}=this.getIconSource(),o=s?getIconLibrary(this.library):void 0;if(!r)return void(this.svg=null);let a=iconCache.get(r);if(a||(a=this.resolveIcon(r,o),iconCache.set(r,a)),!this.initialRender)return;const n=await a;if(n===RETRYABLE_ERROR&&iconCache.delete(r),r===this.getIconSource().url)if(e(n)){if(this.svg=n,o){await this.updateComplete;const t=this.shadowRoot.querySelector("[part='svg']");"function"==typeof o.mutator&&t&&o.mutator(t)}}else switch(n){case RETRYABLE_ERROR:case CACHEABLE_ERROR:this.svg=null,this.emit("sl-error");break;default:this.svg=n.cloneNode(!0),null==(t=null==o?void 0:o.mutator)||t.call(o,this.svg),this.emit("sl-load")}}render(){return this.svg}};SlIcon.styles=[component_styles_default,icon_styles_default],__decorateClass([r()],SlIcon.prototype,"svg",2),__decorateClass([n({reflect:!0})],SlIcon.prototype,"name",2),__decorateClass([n()],SlIcon.prototype,"src",2),__decorateClass([n()],SlIcon.prototype,"label",2),__decorateClass([n({reflect:!0})],SlIcon.prototype,"library",2),__decorateClass([watch("label")],SlIcon.prototype,"handleLabelChange",1),__decorateClass([watch(["name","src","library"])],SlIcon.prototype,"setIcon",1);export{SlIcon};
//# sourceMappingURL=/sm/342d9957cfc2d06e8fa5e4d665b58f3b3dc943774418c5269db2233c827e4f18.map